<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx/23.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.shotvalue.analizador_xgot.controller.VisualizarController">

    <center>
        <VBox spacing="25" alignment="TOP_CENTER"
              style="-fx-background-color: #2E2E2E; -fx-padding: 30;">

            <!-- FILTROS SUPERIORES -->
            <GridPane hgap="15" vgap="10" alignment="CENTER">
                <columnConstraints>
                    <ColumnConstraints percentWidth="16.6"/>
                    <ColumnConstraints percentWidth="16.6"/>
                    <ColumnConstraints percentWidth="16.6"/>
                    <ColumnConstraints percentWidth="16.6"/>
                    <ColumnConstraints percentWidth="16.6"/>
                    <ColumnConstraints percentWidth="16.6"/>
                </columnConstraints>
                <children>
                    <Label text="Período" textFill="white" GridPane.columnIndex="0"/>
                    <ComboBox fx:id="periodBox" GridPane.columnIndex="0" GridPane.rowIndex="1"/>

                    <Label text="Minutos" textFill="white" GridPane.columnIndex="1"/>
                    <HBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="1">
                        <children>
                            <Spinner fx:id="minuteFromSpinner" prefWidth="60"/>
                            <Label text="a" textFill="white"/>
                            <Spinner fx:id="minuteToSpinner" prefWidth="60"/>
                        </children>
                    </HBox>

                    <Label text="Equipo" textFill="white" GridPane.columnIndex="2"/>
                    <ComboBox fx:id="teamSideBox" GridPane.columnIndex="2" GridPane.rowIndex="1"/>

                    <Label text="Jugador" textFill="white" GridPane.columnIndex="3"/>
                    <TextField fx:id="playerSearchField" promptText="Buscar..." GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                    <Label text="Tercio" textFill="white" GridPane.columnIndex="4"/>
                    <ComboBox fx:id="thirdBox" GridPane.columnIndex="4" GridPane.rowIndex="1"/>

                    <Label text="Carril" textFill="white" GridPane.columnIndex="5"/>
                    <ComboBox fx:id="laneBox" GridPane.columnIndex="5" GridPane.rowIndex="1"/>
                </children>
            </GridPane>

            <!-- SECCIÓN PRINCIPAL -->
            <HBox spacing="25" alignment="TOP_CENTER">

                <!-- PANEL DE FILTROS LATERAL -->
                <VBox spacing="12" prefWidth="250" style="-fx-background-color: #1F1F1F; -fx-padding: 20; -fx-border-color: #444; -fx-border-width: 1;">
                    <Label text="Filtros adicionales" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;"/>

                    <Label text="Área" textFill="white"/>
                    <ComboBox fx:id="areaBox"/>

                    <Label text="Situación" textFill="white"/>
                    <ComboBox fx:id="situationBox"/>

                    <Label text="Parte del cuerpo" textFill="white"/>
                    <ComboBox fx:id="bodyPartBox"/>

                    <Label text="Acción previa" textFill="white"/>
                    <ComboBox fx:id="preActionBox"/>

                    <Label text="Resultado" textFill="white"/>
                    <ComboBox fx:id="resultBox"/>

                    <Label text="NPxG" textFill="white"/>
                    <TextField fx:id="xgField" promptText="0.00"/>
                </VBox>

                <!-- PANEL DE GRÁFICOS -->
                <VBox spacing="15" alignment="CENTER"
                      style="-fx-background-color: #1F1F1F; -fx-padding: 20; -fx-border-color: #444; -fx-border-width: 1;">
                    <Label text="Visualizaciones" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;"/>

                    <!-- LEYENDA -->
                    <HBox spacing="10" alignment="CENTER">
                        <Label text="Leyenda:" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="LIMEGREEN"/>
                            <Label text="Gol" style="-fx-text-fill: white;"/>
                        </HBox>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="GOLD"/>
                            <Label text="Atajado" style="-fx-text-fill: white;"/>
                        </HBox>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="CRIMSON"/>
                            <Label text="Fuera" style="-fx-text-fill: white;"/>
                        </HBox>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="ORANGE"/>
                            <Label text="Bloqueado" style="-fx-text-fill: white;"/>
                        </HBox>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="WHITE" stroke="BLACK" strokeWidth="1"/>
                            <Label text="Otro" style="-fx-text-fill: white;"/>
                        </HBox>
                    </HBox>

                    <!-- CANCHA Y ARCO -->
                    <StackPane>
                        <ImageView fx:id="fieldMap" fitWidth="500" fitHeight="250" preserveRatio="true">
                            <image>
                                <Image url="@/img/field_placeholder.png"/>
                            </image>
                        </ImageView>
                        <Canvas fx:id="canvasTiros" width="500" height="250" />
                    </StackPane>

                    <StackPane>
                        <ImageView fx:id="goalView" fitWidth="500" fitHeight="150" preserveRatio="true">
                            <image>
                                <Image url="@/img/goal_placeholder.png"/>
                            </image>
                        </ImageView>
                        <Canvas fx:id="canvasArco" width="500" height="150" />
                    </StackPane>

                    <!-- LEYENDA POSTE -->
                    <HBox spacing="10" alignment="CENTER">
                        <Label text="Leyenda:" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="LIMEGREEN"/>
                            <Label text="Gol" style="-fx-text-fill: white;"/>
                        </HBox>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="GOLD"/>
                            <Label text="Atajado" style="-fx-text-fill: white;"/>
                        </HBox>
                        <HBox spacing="5" alignment="CENTER">
                            <Circle radius="6" fill="GRAY"/>
                            <Label text="Poste" style="-fx-text-fill: white;"/>
                        </HBox>
                    </HBox>
                </VBox>
            </HBox>

            <!-- BOTÓN APLICAR FILTROS GLOBAL -->
            <HBox alignment="CENTER">
                <Button fx:id="applyFiltersBtn" text="Aplicar Filtros"
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            </HBox>

        </VBox>
    </center>
</BorderPane>
